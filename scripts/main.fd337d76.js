"use strict";!function(a,b){function c(a){k.html(Mustache.render(n,{issues:a})).find("li").each(function(c){b(this).data(a[c])})}function d(a){p=!0,a(),p=!1}function e(a,c){return d(function(){o.forEach(function(b){b.name===a&&c?b.api.setValue(c):b.api.clear()})}),c?(b("#filters").html(c),m.fadeIn(200),void k.find("li").each(function(){var d=b(this).data(),e=d[a]!==c;b(this).toggleClass("hidden",e)})):(b("#filters").html(""),m.fadeOut(200),void k.find("li").removeClass("hidden"))}function f(a){function c(c){return b.unique(a.map(function(a){return a[c]}).filter(function(a){return!!a})).sort()}return function(a){var b=c(a);return g(a,b)}}function g(a,c){var d=c.map(function(a){return{value:a}}),f=b("#filter-"+a).selectize({plugins:["remove_button"],allowEmptyOption:!0,valueField:"value",labelField:"value",searchField:"value",options:d,onChange:function(b){p||e(a,b)}})[0].selectize;return{name:a,api:f}}function h(a){l.find("button").removeClass("view-active").filter(".view-"+a).addClass("view-active"),b("body").removeClass("list grid").addClass(a)}var i=["project","category","assignee"],j="duedil-view",k=b("#issues"),l=b("#viewNav"),m=b("#filter-clear"),n=b("#issue-template").html(),o=[],p=!1;b(function(){var d=a.localStorage.getItem(j);d&&h(d),b.getJSON("data/issues.json",function(a){c(a),o=i.map(f(a))}),m.on("click",function(a){e(),a.preventDefault()}),k.on("click",".issue_filter",function(a){var c=b(this).data("type"),d=b(this).text();e(c,d),a.preventDefault()}),l.on("click","button",function(){var c=b(this).text().toLowerCase();h(c),a.localStorage.setItem(j,c)})})}(window,jQuery);